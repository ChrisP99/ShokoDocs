---
title: Configuring Shokofin
sidebar:
  order: 2
Description: Information on how to configure Shokofin to fit your setup.
---
{/*
    TODO: Write an overview for this section.

    TODO: EVERYTHING. Everything in here is a literal copy/paste of the descriptions directly in Shokofin's settings page.

    TODO: Add Revam's changes for VFS library management.
*/}

With Shokofin installed, there's a couple things that need to be done before it can be used as a metadata provider for
your anime collection. The goal is to get Shokofin configured to your liking in a way so that you don't have to visit
the settings very often once set.

## Connecting to Shoko Server

Before you start using the plugin, it is important to connect it to a running instance of **Shoko Server**. Head over to
Shokofin's plugin settings and provide the host, username, and password to get that connected.

![Shokofin - Connection Settings](/src/assets/img/shokofin/Shokofin-Connection-Settings.png)

After you've established a connection to a running instance of **Shoko Server**, feel free to skim through the plugin
settings detailed below and adjust Shokofin to your liking. If the defaults work just fine, go ahead and skip to
[Creating a Shoko Library.](#creating-a-shoko-library)

## Configuring the Plugin Settings

The following will detail what each setting does and common use cases where necessary. Do note that certain options when
changed will require a library recreation for existing libraries that use Shokofin as a provider and will be indicated
where appropriate. Additional information on the subject can be found in the
[Recommendations and Limitations](/jellyfin-integration/recommendations-and-limitations/#TODO) section of the docs for
Shokofin.

### Metadata Settings

Main title source:

    - How to select the main title for each item. The plugin will fallback to the default title if no title can be found in the target language.

Alternate title source:

    - How to select the alternate title for each item. The plugin will fallback to the default title if no title can be found in the target language.

Description source:

    - How to select the description to use for each item.

Allow any title in selected language.

    - Will add any title in the selected language if no official title is found.

Add all metadata for multi-episode entries.

    - Will add the title and description for every episode in a multi-episode entry.

Cleanup AniDB descriptions

    - Remove links and collapse multiple empty lines into one empty line

Minimalistic AniDB descriptions

    - Remove any lines starting with '* ', '-- ', '~ ', 'Note', 'Source', and/or 'Summary'

### Plugin Compatibility Settings

We can optionally set some ids for interoperability with other plugins.

Add AniDB IDs

    - Enabling this will add the AniDB ID for all supported item types where an ID is available.

Add TvDB IDs

    - Enabling this will add the TvDB ID for all supported item types where an ID is available.

Add TMDB IDs

    - Enabling this will add the TMDB ID for all supported item types where an ID is available.

### Library Settings

If you wish to set the Series/Grouping setting below to "Don't group Series into Seasons", you must disable "Automatically merge series that are spread across multiple folders" in the settings for all Libraries that depend on Shokofin for their metadata.
On the other hand, if you want to have Series and Grouping be determined by Shoko, or TvDB/TMDB - you must enable the "Automatically merge series that are spread across multiple folders" setting for all Libraries that use Shokofin for their metadata.
See the settings under each individual Library here: Library Settings

Filtering mode:

    - Choose how the plugin filters out videos in your library.

    - What does strict filtering entail?

        - Strict filtering means the plugin will filter out any and all unrecognized videos from the active library.

    - What does auto filtering entail?

        - Auto filtering means the plugin will only filter out unrecognized videos if no other metadata provider is enabled, otherwise it will leave them in the library.

    - What does unrestricted filtering entail?

        - Unrestricted filtering means the plugin will not filter out anything from the active library.

Series/Season grouping:

    - Determines how to group Series together and divide them into Seasons.

        - Warning: Modifying this setting requires the deletion and re-creation of any libraries using this plugin.

    - Why can't I just refresh all metadata?

        - Currently, refreshing and replacing all metadata does not remove all the metadata stored by Jellyfin. Additionally, if two or more show's entries have been merged, they cannot then be unmerged. Recreation of the library is the only way to ensure that you do not have mixed metadata in your libraries.

    - What data is kept when recreating the libraries?

        - The user data for each file is still kept after deleting a library. User data includes any ratings, play history, watch status and the last selected audio/subtitle track for a file.

Box-set/Movie grouping:

    - Determines how to group Movies together into Box-sets.

Enable library separation

    - This setting can be used to have one shared root folder on your disk for two libraries in Shoko — one library for movies and one for shows. Enabling this will cause the plugin to actively filter out movies from the show library and everything but movies from the movies library. Also, if you've selected to use Shoko's Group feature to create Series/Seasons then it will also exclude the Movies from within the series — i.e. the "season" for the movie won't appear — even if they share a group in Shoko.

Specials placement within seasons:

    - Determines how Specials are placed within Seasons. Warning: Modifying this setting requires a recreation (read as; delete existing then create a new) of any libraries using this plugin — otherwise you will have mixed metadata.

Mark specials

    - Add a number to the title of each Special episode

### User Settings

Configure settings for:

    - Select a user to add, modify or delete the user settings for.

Enable synchronization features

    - Enabling this setting is mandatory to enable the sync features below. Select the sync feature you would like to use by enabling the checkbox.

Sync watch-state on import or refresh

    - Enabling this setting will import the watch-state for items from Shoko on import or refresh.

Sync watch-state after playback

    - Enabling this setting will sync-back the watch-state to Shoko after playback has ended.

Sync watch-state events during playback

    - Enabling this setting will sync-back the watch-state to Shoko on every play/pause/resume/stop event during playback.

Sync watch-state live during playback

    - Enabling this setting will sync-back the watch-state to Shoko live during playback.

Sync watch-state for restricted videos

    - Enabling this setting will sync-back the watch-state to Shoko for restricted videos (H).

Username:

    - The username of the account to synchronize with the currently selected user.

Password:

    - The password for account. It can be empty.

### Tag Settings

Hide unverified tags.

Hide art style related tags

Hide misc info tags that may be useful

Hide potentially plot-spoiling tags

Hide any miscellaneous tags

Hide any tags related to the setting — a time or place in which the story occurs.

Hide any tags that involve how or where it aired, or any awards it got

### Advanced Settings

Enable Crash Reporting.

    - Improve the plugin's stability by allowing Sentry to report any crashes, which helps us improve the plugin's stability. This may include paths to your videos involved in the operation, which some users may consider sensitive. We assure you that this data is used solely for diagnostic purposes. Participation is entirely optional but greatly appreciated.

Public Shoko host URL:

    - This is the public URL leading to where Shoko is running. It is used to redirect to Shoko if you click on a Shoko ID in the UI if Shoko and/or Jellyfin is running within a container. It should include both the protocol and the IP/DNS name.

Ignored file extensions:

    - A space separated list of file extensions which will be ignored during the library scan.

Ignored folder names:

    - A comma separated list of folder names which will be ignored during the library scan.

### Experimental Settings

Any features/settings in this section is still considered to be in an experimental state. You can enable them, but at the risk if them messing up your library.

Season ordering:

    - Determines how to order Seasons within Shows.

Automatically merge multiple versions

    - Automatically merge multiple versions of the same item together after a library scan. Only applies to items with a Shoko ID set.

Always split existing versions of movies before merging multiple versions

    - Always split existing merged items before starting the merge.

    - What is this setting for?

        - Enabling this setting will make sure there will be no merge conflicts by splitting up all the existing merged versions. It will probably also make the plugin do a lot of unneeded work 99.5% of the time, but will help for the last 0.5% that actually need this to be done before every merge. An example is ensuring multiple parts of a movie series (e.g. "Part 1", "Part 2", etc.) are not merged in core Jellyfin because they contain the same Shoko Series Id.

Always split existing versions of episodes before merging multiple versions
`
    - Always split existing merged items before starting the merge.

    - What is this setting for?

        - Enabling this setting will make sure there will be no merge conflicts by splitting up all the existing merged versions. It will probably also make the plugin do a lot of unneeded work 99.5% of the time, but will help for the last 0.5% that actually need this to be done before every merge.

Automatically merge cour seasons

    - Coming soon™ to a media library near you.

## Creating a Shoko Library

Before creating a library, be sure the plugin is configured to your liking as certain options may require creating a
library from scratch when changed due to how Jellyfin works internally. More information on the subject can be found in
the [Recommendations and Limitations](/jellyfin-integration/recommendations-and-limitations/#TODO) section of the docs
for Shokofin.

![Shokofin - Library Dashboard](/src/assets/img/shokofin/Shokofin-Library-Dashboard.png)

Let's get started by adding a new library in Jellyfin's dashboard. All important options that will impact your
experience with Shokofin is detailed as follows:

### Content Type
![Shokofin - Library Settings - Content Type](/src/assets/img/shokofin/Shokofin-Library-Content-Type.png)

The "Shows" type is best for most use cases, as Shokofin will still display anime movies in the library unless
configured to separate movies from shows. If you configured Shokofin to separate movies, you will need to create a
"Shows" library as well as a "Movies" library.

Setting the type to "Mixed Movies and Shows" *will* work, but is not recommended due to quirks within Jellyfin, and with
how Shokofin works as a plugin. Any other library type is otherwise unsupported.

### Folders
![Shokofin - Library Settings - Folders](/src/assets/img/shokofin/Shokofin-Library-Folders.png)

When specifying the media library's file path, be aware that any path you give must point to a directory with the same
contents that Shoko Server sees.

For example, if Shoko Server knows the import folder for your collection as `C:\ShokoImport\`, and Jellyfin is given a
folder `/mnt/anime`, as long as both directories contain the same things, Shokofin will be able to identify your media.
Pointing Jellyfin to further nested folders seen within Shoko's import folder will also work, such as `/mnt/anime/shows`
and `/mnt/anime/movies` given that both `C:\ShokoImport\shows` and `C:\ShokoImport\movies` also exist.

### Language and Country
![Shokofin - Library Settings - Language and Country](/src/assets/img/shokofin/Shokofin-Library-Lang-and-Country.png)
{/* TODO: Describe how these settings will not do anything UNLESS certain overrides are set */}

### Embedded Info
![Shokofin - Library Settings - Embedded Info](/src/assets/img/shokofin/Shokofin-Library-Embedded-Info.png)
{/* Does this section even matter? */}

### Real Time Monitoring
![Shokofin - Library Settings - Real Time Monitoring](/src/assets/img/shokofin/Shokofin-Library-Real-Time-Monitoring.png)

Real time monitoring can be enabled if you desire, which will let Jellyfin listen to file system events for new and
modified files. This option will not do anything however if your file system does not support these events, and is
especially common with network mounts like NFS or SMB shares. As an alternative, Shokofin provides a feature called
Signalr in it's plugin settings which will allow Shokofin to maintain a constant connection to Shoko Server to recieve
and trigger updates for new and updated files/metadata. More information on configuring this feature can be found in the
[Signalr section](#signalr) of this page.

### Metadata Downloaders
![Shokofin - Library Settings - Metadata Downloaders](/src/assets/img/shokofin/Shokofin-Library-Metadata-Downloaders.png)

When using Shokofin, it is recommended to not enable any other metadata providers for all library types to prevent mixed 
metadata along with a slew of other problems from occurring. This is due to other metadata providers identifying the
media incorrectly or just clashing in general with how your collection is organized.

### Metadata Savers
![Shokofin - Library Settings - Metadata Savers](/src/assets/img/shokofin/Shokofin-Library-Metadata-Savers.png)


:::danger[Important]
    **DO NOT** enable metadata saving using Nfo files with libraries managed by Shoko, and if any are present among
    your media library, **DELETE THEM NOW**. The reasoning behind this is that Jellyfin prioritizes metadata from Nfo
    files above any other metadata provider. This results in weird or broken behavior since Shokofin is unable to
    override metadata that's sourced from an Nfo.
    
    Either find any files in your library that have the `.nfo` extension using your file explorer and delete them, or
    run the following command in a terminal according to your operating system. Be sure to substitute the path with the
    location of your library.

    ###### Windows (Powershell):
    
    ```powershell
    Get-ChildItem -Path 'C:\path\to\library\' '*.nfo' | Remove-Item
    ```

    ###### Linux:
    
    ```sh
    find /path/to/library/ -name "*.nfo" -type f -delete
    ```
:::

### Image Fetchers
![Shokofin - Library Settings - Image Fetchers](/src/assets/img/shokofin/Shokofin-Library-Image-Fetchers.png)

Shoko should be enabled and set as the top-most image fetcher for all library types and categories. Any additional metadata providers may be enabled, but can have mixed results where incorrect images are fetched. Ones that are
known to work without issue alongside Shokofin are the Embedded Image Extractor and Screen Grabber providers.

### Saving Artwork Into Media Folders
![Shokofin - Library Settings - Saving Artwork](/src/assets/img/shokofin/Shokofin-Library-Saving-Artwork.png)

### Merge Series Across Folders
![Shokofin - Library Settings - Merge Series](/src/assets/img/shokofin/Shokofin-Library-Merge-Series.png)

If you are using the VFS feature provided by Shokofin, this only needs to be enabled if multiple folders were added to
the library earlier on in the configuration. For non-VFS managed libraries, it is recommended to enable this no matter what. Enabling lets Shokofin properly group your media into series that reflect your Shoko library without being limited
by Jellyfin and the media's underlying folder structure.